{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\anonibus_navigation\\\\Map\\\\App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport PermissionsAndroid from \"react-native-web/dist/exports/PermissionsAndroid\";\nimport MapView, { Marker, AnimatedRegion, Polyline, PROVIDER_GOOGLE } from \"react-native-maps\";\nimport haversine from \"haversine\";\nvar LATITUDE_DELTA = 0.009;\nvar LONGITUDE_DELTA = 0.009;\nvar LATITUDE = 37.78825;\nvar LONGITUDE = -122.4324;\n\nvar AnimatedMarkers = function (_React$Component) {\n  _inherits(AnimatedMarkers, _React$Component);\n\n  var _super = _createSuper(AnimatedMarkers);\n\n  function AnimatedMarkers(props) {\n    var _this;\n\n    _classCallCheck(this, AnimatedMarkers);\n\n    _this = _super.call(this, props);\n\n    _this.getMapRegion = function () {\n      return {\n        latitude: _this.state.latitude,\n        longitude: _this.state.longitude,\n        latitudeDelta: LATITUDE_DELTA,\n        longitudeDelta: LONGITUDE_DELTA\n      };\n    };\n\n    _this.calcDistance = function (newLatLng) {\n      var prevLatLng = _this.state.prevLatLng;\n      return haversine(prevLatLng, newLatLng) || 0;\n    };\n\n    _this.state = {\n      latitude: LATITUDE,\n      longitude: LONGITUDE,\n      routeCoordinates: [],\n      distanceTravelled: 0,\n      prevLatLng: {},\n      coordinate: new AnimatedRegion({\n        latitude: LATITUDE,\n        longitude: LONGITUDE,\n        latitudeDelta: 0,\n        longitudeDelta: 0\n      })\n    };\n    return _this;\n  }\n\n  _createClass(AnimatedMarkers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var coordinate = this.state.coordinate;\n      this.watchID = navigator.geolocation.watchPosition(function (position) {\n        var _this2$state = _this2.state,\n            routeCoordinates = _this2$state.routeCoordinates,\n            distanceTravelled = _this2$state.distanceTravelled;\n        var _position$coords = position.coords,\n            latitude = _position$coords.latitude,\n            longitude = _position$coords.longitude;\n        var newCoordinate = {\n          latitude: latitude,\n          longitude: longitude\n        };\n\n        _this2.setState({\n          latitude: latitude,\n          longitude: longitude,\n          routeCoordinates: routeCoordinates.concat([newCoordinate]),\n          distanceTravelled: distanceTravelled + _this2.calcDistance(newCoordinate),\n          prevLatLng: newCoordinate\n        });\n      }, function (error) {\n        return console.log(error);\n      }, {\n        enableHighAccuracy: true,\n        timeout: 20000,\n        maximumAge: 1000,\n        distanceFilter: 10\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      navigator.geolocation.clearWatch(this.watchID);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }\n      }, React.createElement(MapView, {\n        style: styles.map,\n        provider: PROVIDER_GOOGLE,\n        showUserLocation: true,\n        followUserLocation: true,\n        loadingEnabled: true,\n        region: this.getMapRegion(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }\n      }, React.createElement(Polyline, {\n        coordinates: this.state.routeCoordinates,\n        strokeWidth: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }\n      }), React.createElement(Marker.Animated, {\n        ref: function ref(marker) {\n          _this3.marker = marker;\n        },\n        coordinate: this.state.coordinate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: styles.buttonContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: [styles.bubble, styles.button],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.bottomBarContent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }\n      }, parseFloat(this.state.distanceTravelled).toFixed(2), \" km\"))));\n    }\n  }]);\n\n  return AnimatedMarkers;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    justifyContent: \"flex-end\",\n    alignItems: \"center\"\n  }),\n  map: _objectSpread({}, StyleSheet.absoluteFillObject),\n  bubble: {\n    flex: 1,\n    backgroundColor: \"rgba(255,255,255,0.7)\",\n    paddingHorizontal: 18,\n    paddingVertical: 12,\n    borderRadius: 20\n  },\n  latlng: {\n    width: 200,\n    alignItems: \"stretch\"\n  },\n  button: {\n    width: 80,\n    paddingHorizontal: 12,\n    alignItems: \"center\",\n    marginHorizontal: 10\n  },\n  buttonContainer: {\n    flexDirection: \"row\",\n    marginVertical: 20,\n    backgroundColor: \"transparent\"\n  }\n});\nexport default AnimatedMarkers;","map":{"version":3,"sources":["C:/anonibus_navigation/Map/App.js"],"names":["React","MapView","Marker","AnimatedRegion","Polyline","PROVIDER_GOOGLE","haversine","LATITUDE_DELTA","LONGITUDE_DELTA","LATITUDE","LONGITUDE","AnimatedMarkers","props","getMapRegion","latitude","state","longitude","latitudeDelta","longitudeDelta","calcDistance","newLatLng","prevLatLng","routeCoordinates","distanceTravelled","coordinate","watchID","navigator","geolocation","watchPosition","position","coords","newCoordinate","setState","concat","error","console","log","enableHighAccuracy","timeout","maximumAge","distanceFilter","clearWatch","styles","container","map","marker","buttonContainer","bubble","button","bottomBarContent","parseFloat","toFixed","Component","StyleSheet","create","absoluteFillObject","justifyContent","alignItems","flex","backgroundColor","paddingHorizontal","paddingVertical","borderRadius","latlng","width","marginHorizontal","flexDirection","marginVertical"],"mappings":"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","sourcesContent":["/**\n * Sample React Native App\n * https://github.com/facebook/react-native\n *\n * @format\n * @flow\n */\n\nimport React from \"react\";\nimport {\n  StyleSheet,\n  View,\n  Text,\n  TouchableOpacity,\n  Platform,\n  PermissionsAndroid\n} from \"react-native\";\nimport MapView, {\n  Marker,\n  AnimatedRegion,\n  Polyline,\n  PROVIDER_GOOGLE\n} from \"react-native-maps\";\nimport haversine from \"haversine\";\n\n// const LATITUDE = 29.95539;\n// const LONGITUDE = 78.07513;\nconst LATITUDE_DELTA = 0.009;\nconst LONGITUDE_DELTA = 0.009;\nconst LATITUDE = 37.78825;\nconst LONGITUDE = -122.4324;\n\n\n\nclass AnimatedMarkers extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      latitude: LATITUDE,\n      longitude: LONGITUDE,\n      routeCoordinates: [],\n      distanceTravelled: 0,\n      prevLatLng: {},\n      coordinate: new AnimatedRegion({\n        latitude: LATITUDE,\n        longitude: LONGITUDE,\n        latitudeDelta: 0,\n        longitudeDelta: 0\n      })\n    };\n  }\n\n  componentDidMount() {\n    const { coordinate } = this.state;\n\n    this.watchID = navigator.geolocation.watchPosition(\n      position => {\n        const { routeCoordinates, distanceTravelled } = this.state;\n        const { latitude, longitude } = position.coords;\n\n        const newCoordinate = {\n          latitude,\n          longitude\n        };\n\n        \n        this.setState({\n          latitude,\n          longitude,\n          routeCoordinates: routeCoordinates.concat([newCoordinate]),\n          distanceTravelled:\n            distanceTravelled + this.calcDistance(newCoordinate),\n          prevLatLng: newCoordinate\n        });\n      },\n      error => console.log(error),\n      {\n        enableHighAccuracy: true,\n        timeout: 20000,\n        maximumAge: 1000,\n        distanceFilter: 10\n      }\n    );\n  }\n\n  componentWillUnmount() {\n    navigator.geolocation.clearWatch(this.watchID);\n  }\n\n  getMapRegion = () => ({\n    latitude: this.state.latitude,\n    longitude: this.state.longitude,\n    latitudeDelta: LATITUDE_DELTA,\n    longitudeDelta: LONGITUDE_DELTA\n  });\n\n  calcDistance = newLatLng => {\n    const { prevLatLng } = this.state;\n    return haversine(prevLatLng, newLatLng) || 0;\n  };\n\n  render() {\n    return (\n      <View style={styles.container}>\n        <MapView\n          style={styles.map}\n          provider={PROVIDER_GOOGLE}\n          showUserLocation\n          followUserLocation\n          loadingEnabled\n          region={this.getMapRegion()}\n        >\n          <Polyline coordinates={this.state.routeCoordinates} strokeWidth={5} />\n          <Marker.Animated\n            ref={marker => {\n              this.marker = marker;\n            }}\n            coordinate={this.state.coordinate}\n          />\n        </MapView>\n        <View style={styles.buttonContainer}>\n          <TouchableOpacity style={[styles.bubble, styles.button]}>\n            <Text style={styles.bottomBarContent}>\n              {parseFloat(this.state.distanceTravelled).toFixed(2)} km\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: \"flex-end\",\n    alignItems: \"center\"\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject\n  },\n  bubble: {\n    flex: 1,\n    backgroundColor: \"rgba(255,255,255,0.7)\",\n    paddingHorizontal: 18,\n    paddingVertical: 12,\n    borderRadius: 20\n  },\n  latlng: {\n    width: 200,\n    alignItems: \"stretch\"\n  },\n  button: {\n    width: 80,\n    paddingHorizontal: 12,\n    alignItems: \"center\",\n    marginHorizontal: 10\n  },\n  buttonContainer: {\n    flexDirection: \"row\",\n    marginVertical: 20,\n    backgroundColor: \"transparent\"\n  }\n});\n\nexport default AnimatedMarkers;\n"]},"metadata":{},"sourceType":"module"}